#!/bin/bash

if [ ! -n "$1" ]; then
    echo "Oops! Pass a name.";
    exit 1;
fi

set -e

mkdir -p .git-multi

unset GIT_WORK_TREE

git init --bare ".git-multi/${1}"

git config -f ".git-multi/${1}/config" core.bare false
git config -f ".git-multi/${1}/config" core.worktree "../../"

mkdir -p ".git-multi/${1}/info"
echo ".git-multi/" >> .git-multi/${1}/info/exclude
